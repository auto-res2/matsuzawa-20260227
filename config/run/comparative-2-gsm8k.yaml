# Comparative baseline 2: Self-consistency with 3 samples
run_id: comparative-2-gsm8k

# [VALIDATOR FIX - Attempt 3]
# [PROBLEM]: normalize_number extracts first number from text, which may be from reasoning steps
# [CAUSE]: With max_tokens=64 and implicit reasoning, model may output numbers during reasoning
# [FIX]: Added ANSWER: delimiter pattern and increased max_tokens for reasoning space
#
# [OLD CODE]:
# method:
#   type: self_consistency
#   name: "Self-Consistency"
#   description: "Sample 3 times, take majority vote"
#   max_calls: 3
#   num_samples: 3
#   prompt: "Think step-by-step internally to solve this. Output ONLY a single number as your final answer - no words, units, or labels.\n\nQuestion:"
#   temperature: 0.7  # need temperature > 0 for diversity
#
# [NEW CODE]:
method:
  type: self_consistency
  name: "Self-Consistency"
  description: "Sample 3 times, take majority vote"
  max_calls: 3
  num_samples: 3
  prompt: "Solve this problem step-by-step. After your reasoning, write 'ANSWER:' followed by only the final numeric answer.\n\nQuestion:"
  temperature: 0.7  # need temperature > 0 for diversity

model:
  provider: openai
  model_name: gpt-4o-mini
  temperature: 0.7
  max_tokens: 512  # Allow space for reasoning

dataset:
  name: gsm8k
  split: test
  num_samples: 200
  shuffle_seed: 42

inference:
  batch_size: 1
  num_workers: 1

wandb:
  tags: ["comparative", "self-consistency", "gsm8k"]
